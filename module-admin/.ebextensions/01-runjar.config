files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/99_run_jar.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      # JAR 파일 실행 스크립트

      # JAR 파일 경로 설정
      JAR_FILE="/var/app/current/admin-application.jar"

      # JAR 파일이 존재하는지 확인
      if [ -f "$JAR_FILE" ]; then
        echo "Starting the JAR file..."
        # JAR 파일 실행
        java -jar "$JAR_FILE" &
      else
        echo "JAR file not found: $JAR_FILE"
        exit 1
      fi

container_commands:
  01_run_jar:
    command: "bash /opt/elasticbeanstalk/hooks/appdeploy/pre/99_run_jar.sh"
    leader_only: true  # 이 명령어는 리더 인스턴스에서만 실행
